<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.org">
<TITLE>Stata merge</TITLE>
</HEAD><BODY BGCOLOR="white" TEXT="black">
<CENTER>
<H1>Stata merge</H1>
</CENTER>


<UL>
<LI>master_data
</UL>

<TABLE BORDER="1" CELLPADDING="4">
<TR>
<TH>var1</TH>
<TH>var2</TH>
<TH>var3</TH>
</TR>
<TR>
<TD>A</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">3</TD>
</TR>
<TR>
<TD>B</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">.</TD>
</TR>
<TR>
<TD>C</TD>
<TD ALIGN="right">.</TD>
<TD ALIGN="right">.</TD>
</TR>
</TABLE>

<UL>
<LI>using_data
</UL>

<TABLE BORDER="1" CELLPADDING="4">
<TR>
<TH>var1</TH>
<TH>var2</TH>
<TH>var3</TH>
<TH>var4</TH>
</TR>
<TR>
<TD>A</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">4</TD>
</TR>
<TR>
<TD>B</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">4</TD>
</TR>
<TR>
<TD>C</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">4</TD>
</TR>
</TABLE>

<UL>
<LI>merge, without update
<PRE>
  . clear
  . use master_data
  . merge 1:1 var1 using using_data
  
      Result                           # of obs.
      -----------------------------------------
      not matched                             0
      matched                                 3  (_merge==3)
      -----------------------------------------
</PRE>

</UL>

<TABLE BORDER="1" CELLPADDING="4">
<TR>
<TH>var1</TH>
<TH>var2</TH>
<TH>var3</TH>
<TH>var4</TH>
<TH>_merge</TH>
</TR>
<TR>
<TD>A</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">matched (3)</TD>
</TR>
<TR>
<TD>B</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">.</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">matched (3)</TD>
</TR>
<TR>
<TD>C</TD>
<TD ALIGN="right">.</TD>
<TD ALIGN="right">.</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">matched (3)</TD>
</TR>
</TABLE>

<UL>
<LI>merge, with update
<PRE>
  . clear
  . use master_data
  . merge 1:1 var1 using using_data, update
  
      Result                           # of obs.
      -----------------------------------------
      not matched                             0
  
      matched                                 3
          not updated                         0  (_merge==3)
          missing updated                     1  (_merge==4)
          nonmissing conflict                 2  (_merge==5)
      -----------------------------------------
</PRE>

<P></P>
</UL>

<TABLE BORDER="1" CELLPADDING="4">
<TR>
<TH>var1</TH>
<TH>var2</TH>
<TH>var3</TH>
<TH>var4</TH>
<TH>_merge</TH>
</TR>
<TR>
<TD>A</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">nonmissing conflict (5)</TD>
</TR>
<TR>
<TD>B</TD>
<TD ALIGN="right">3</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">nonmissing conflict (5)</TD>
</TR>
<TR>
<TD>C</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">1</TD>
<TD ALIGN="right">4</TD>
<TD ALIGN="right">missing updated (4)</TD>
</TR>
</TABLE>

<!-- html code generated by txt2tags 2.6 (http://txt2tags.org) -->
<!-- cmdline: txt2tags -t html stata_merge.t2t -->
</BODY></HTML>
